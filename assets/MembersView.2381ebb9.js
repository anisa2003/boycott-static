import{_ as d,r as m,o as n,c as a,a as e,b as p,w as g,d as f,t as c,s as y,u as b,e as v,k as w,F as x,g as k,f as M}from"./index.3ae408f2.js";import"./moment.9709ab41.js";const S={name:"MemberItem",props:{id:String,login:String,country:String,state:String,city:String,createdAt:Date,photo:String},data(){return{dateOptions:{year:"numeric",month:"long",day:"numeric"}}}},V={class:"col-auto"},A={class:"service-item position-relative text-center"},D=["src"],L={key:1,src:y,class:"testimonial-img member"},N=e("hr",null,null,-1),$=e("p",null,"Member depuis:",-1);function q(o,t,s,h,i,u){const l=m("RouterLink");return n(),a("div",V,[e("div",A,[s.photo?(n(),a("img",{key:0,src:"https://images.kalanso.top/"+s.photo,class:"testimonial-img member"},null,8,D)):(n(),a("img",L)),e("h4",null,[p(l,{to:"/profile/"+s.id,class:"stretched-link"},{default:g(()=>[f(c(s.login),1)]),_:1},8,["to"])]),e("p",null,c(s.country),1),e("p",null,c(s.city),1),N,$,e("p",null,c(new Date(s.createdAt).toLocaleDateString("fr-FR",i.dateOptions)),1)])])}const B=d(S,[["render",q]]),I={name:"MembersView",components:{MemberItem:B},data(){return{members:[],search:"",toast:b()}},async created(){await this.getMembers()},methods:{async getMembers(){try{let o=await fetch("https://boycott-service.onrender.com/api/users"),t=await o.json();o.status===200?this.members=t.users:this.toast.error(t.message)}catch(o){this.toast.error(o)}}},watch:{async search(o){if(o.length==0)await this.getMembers();else{if(o.length<2)return;try{let t=await fetch("https://boycott-service.onrender.com/api/user/search/"+o),s=await t.json();t.status===200?this.members=s.users:this.toast.error(s.message)}catch(t){this.toast.error(t)}}}}},R={id:"main","data-aos":"fade","data-aos-delay":"1500"},j={class:"page-header d-flex align-items-center mb-4"},F={class:"container position-relative"},T={class:"row d-flex justify-content-center"},C={class:"col-lg-10 text-center"},O=e("h2",null,"Nos membres",-1),E={role:"form",class:"form mb-4"},U={class:"form-group mt-3"},z={id:"services",class:"services member"},G={class:"container"},H=e("div",{class:"section-header"},[e("h2",null,"Nos membres"),e("p",null,"Les gens qui nous supportent ")],-1),J={class:"row gy-4"};function K(o,t,s,h,i,u){const l=m("MemberItem");return n(),a("main",R,[e("div",j,[e("div",F,[e("div",T,[e("div",C,[O,e("form",E,[e("div",U,[v(e("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=r=>i.search=r),placeholder:"Rechercher un membre par pays ou par ville",required:""},null,512),[[w,i.search]])])])])])])]),e("section",z,[e("div",G,[H,e("div",J,[(n(!0),a(x,null,k(i.members,(r,_)=>(n(),M(l,{id:r._id,login:r.login,country:r.country,state:r.state,city:r.city,photo:r.photo,createdAt:r.createdAt,key:_},null,8,["id","login","country","state","city","photo","createdAt"]))),128))])])])])}const W=d(I,[["render",K]]);export{W as default};
