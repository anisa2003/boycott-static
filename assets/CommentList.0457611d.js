import{h as y}from"./moment.9709ab41.js";import{_ as b,u as v,r as h,o as i,c as n,a as t,F as C,h as w,b as m,w as u,d as p,t as r,k as x,aR as I,aP as L,g as D}from"./index.1f24928c.js";const E={name:"CommentList",data(){return{comments:[],toast:v()}},async created(){await this.getComments()},methods:{async getComments(){this.comments=[];try{(await(await fetch("https://boycott-service.onrender.com/api/boycott")).json()).forEach(o=>{o.comments.forEach(a=>{let c=y(new Date(a.createdAt)).format("MM-DD-YYYY"),d={_id:o._id,title:o.title,image:o.image,date:c,user_id:a.userId._id,login:a.userId.login,comment_id:a._id,text:a.text};this.comments.push(d)})})}catch(s){this.toast.error(s)}},async deleteComment(s,l){try{await fetch("https://boycott-service.onrender.com/api/comment?boycottId="+s+"&commentId="+l,{method:"DELETE",headers:{"Content-type":"application/json",Authorization:"Bearer "+localStorage.accessToken,"x-access-token":localStorage.accessToken}}),this.getComments()}catch(o){this.toast.error(o)}}}},_=s=>(I("data-v-4f547fa3"),s=s(),L(),s),S={id:"main","data-aos":"fade","data-aos-delay":"500"},T={class:"content-wrapper"},B={class:"row"},Y={class:"col-12 grid-margin"},M={class:"card bg-transparent"},N={class:"card-body"},R=_(()=>t("div",{class:"card-title row"},[t("h4",null,"Commentaires")],-1)),V={class:"table-responsive"},$={class:"table text-center table-dark table-striped rounded-corners"},j=_(()=>t("thead",null,[t("tr",null,[t("th"),t("th",null," Produit "),t("th",null," Utilisateur "),t("th",null," Commentaire "),t("th",null," Date "),t("th")])],-1)),q=["src"],A={key:1,src:D,class:"img-fluid small-testimonial-img",alt:""},F={class:"text-left"},P={class:"date-comment"},z=["onClick"],U=_(()=>t("i",{class:"bi bi-trash"},null,-1)),G=[U];function H(s,l,o,a,c,d){const g=h("router-link"),f=h("RouterLink");return i(),n("main",S,[t("div",T,[t("div",B,[t("div",Y,[t("div",M,[t("div",N,[R,t("div",V,[t("table",$,[j,t("tbody",null,[(i(!0),n(C,null,w(c.comments,(e,k)=>(i(),n("tr",{key:k},[t("td",null,[e.image&&e.image.length>0?(i(),n("img",{key:0,src:"https://images.kalanso.top/"+e.image[0],class:"small-testimonial-img",alt:""},null,8,q)):(i(),n("img",A))]),t("td",null,[m(g,{target:"_blank",to:{name:"boycott",params:{id:e._id}}},{default:u(()=>[p(r(e.title),1)]),_:2},1032,["to"])]),t("td",null,[m(f,{target:"_blank",to:"/profile/"+e.user_id},{default:u(()=>[p(r(e.login),1)]),_:2},1032,["to"])]),t("td",F,r(e.text),1),t("td",P,r(e.date),1),t("td",null,[t("a",{href:"#",onClick:x(J=>d.deleteComment(e._id,e.comment_id),["prevent"])},G,8,z)])]))),128))])])])])])])])])])}const Q=b(E,[["render",H],["__scopeId","data-v-4f547fa3"]]);export{Q as default};
