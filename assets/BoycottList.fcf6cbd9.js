import{h as r}from"./moment.9709ab41.js";import{_ as b,u as w,r as p,o as n,c,a as t,e as k,v as y,F as B,g as D,b as h,w as u,d as l,t as i,j as S,aQ as x,aO as E,h as Y}from"./index.686e4587.js";import{_ as C}from"./boycott.abc0ad59.js";const L={name:"BoycottList",data(){return{boycotts:[],sort:"",toast:w()}},async created(){await this.getBoycotts()},watch:{sort(s){s?this.getBoycotts(!0):this.getBoycotts()}},methods:{async getBoycotts(s){this.boycotts=[];let a;try{s?a=await fetch("https://boycott-service.onrender.com/api/boycott/sort/"+this.sort):a=await fetch("https://boycott-service.onrender.com/api/boycott"),this.boycotts=await a.json(),this.boycotts.forEach(o=>{o.dateStart=r(new Date(o.dateStart)).isValid()?r(new Date(o.dateStart)).format("MM-DD-YYYY"):"Non d\xE9fini",o.dateEnd=r(new Date(o.dateEnd)).isValid()?r(new Date(o.dateEnd)).format("MM-DD-YYYY"):"Non d\xE9fini"})}catch(o){this.toast.error(o)}},async deleteBoycott(s){try{await fetch("https://boycott-service.onrender.com/api/boycott?id="+s,{method:"DELETE",headers:{"Content-type":"application/json",Authorization:"Bearer "+localStorage.accessToken,"x-access-token":localStorage.accessToken}}),this.getBoycotts()}catch(a){this.toast.error(a)}}}},d=s=>(x("data-v-cdcc6238"),s=s(),E(),s),M={id:"main","data-aos":"fade","data-aos-delay":"500"},V={class:"content-wrapper"},I={class:"row"},N={class:"col-12 grid-margin"},T={class:"card bg-transparent"},j={class:"card-body"},q={class:"card-title row"},A=d(()=>t("div",{class:"col"},[t("h4",null,"Boycotts")],-1)),F={class:"col-auto form-inline"},R={class:"form-group row"},z=d(()=>t("label",{class:"col-sm-3 col-form-label text-nowrap"},"Trier par: ",-1)),O={class:"col-sm-9"},P=Y('<option selected data-v-cdcc6238>---</option><option value="dateStart" data-v-cdcc6238>date du d\xE9but</option><option value="dateEnd" data-v-cdcc6238>date de la fin</option><option value="likes_count" data-v-cdcc6238>nombre de membres</option><option value="warns_count" data-v-cdcc6238>nombre d&#39;avertissements</option><option value="comments_count" data-v-cdcc6238>nombre de commentaires</option>',6),Q=[P],U={class:"table-responsive"},$={class:"table text-center table-dark table-striped rounded-corners"},G=d(()=>t("thead",null,[t("tr",null,[t("th"),t("th",null," Produit "),t("th",null," Cr\xE9ateur "),t("th",null," Date du d\xE9but "),t("th",null," Date de la fin "),t("th",null,[t("i",{class:"bi bi-chat-quote-fill"}),l(" Commentaires")]),t("th",null,[t("i",{class:"bi bi-people-fill"}),l(" Membres")]),t("th",null,[t("i",{class:"bi bi-exclamation-diamond-fill"}),l(" Avertissements")]),t("th"),t("th")])],-1)),H=["src"],J={key:1,src:C,class:"img-fluid small-testimonial-img",alt:""},K=d(()=>t("i",{class:"bi bi-pencil"},null,-1)),W=["onClick"],X=d(()=>t("i",{class:"bi bi-trash"},null,-1)),Z=[X];function tt(s,a,o,et,_,v){const m=p("router-link"),f=p("RouterLink");return n(),c("main",M,[t("div",V,[t("div",I,[t("div",N,[t("div",T,[t("div",j,[t("div",q,[A,t("div",F,[t("div",R,[z,t("div",O,[k(t("select",{class:"form-control","onUpdate:modelValue":a[0]||(a[0]=e=>_.sort=e)},Q,512),[[y,_.sort]])])])])]),t("div",U,[t("table",$,[G,t("tbody",null,[(n(!0),c(B,null,D(_.boycotts,(e,g)=>(n(),c("tr",{key:g},[t("td",null,[e.image&&e.image.length>0?(n(),c("img",{key:0,src:"https://images.kalanso.top/"+e.image[0],class:"small-testimonial-img",alt:""},null,8,H)):(n(),c("img",J))]),t("td",null,[h(m,{target:"_blank",to:{name:"boycott",params:{id:e._id}}},{default:u(()=>[l(i(e.title),1)]),_:2},1032,["to"])]),t("td",null,[h(m,{target:"_blank",to:"/profile/"+e.userId._id},{default:u(()=>[l(i(e.userId.login),1)]),_:2},1032,["to"])]),t("td",null,i(e.dateStart),1),t("td",null,i(e.dateEnd),1),t("td",null,i(e.comments.length),1),t("td",null,i(e.likes.length),1),t("td",null,i(e.warns.length),1),t("td",null,[h(f,{to:{name:"editBoycott",params:{id:e._id}}},{default:u(()=>[K]),_:2},1032,["to"])]),t("td",null,[t("a",{href:"#",onClick:S(st=>v.deleteBoycott(e._id),["prevent"])},Z,8,W)])]))),128))])])])])])])])])])}const nt=b(L,[["render",tt],["__scopeId","data-v-cdcc6238"]]);export{nt as default};
