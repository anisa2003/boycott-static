import{_ as h,r as d,o,c as a,a as s,b as _,w as y,d as l,t as n,g as f,u as B,F as b,h as k}from"./index.1f24928c.js";const w={name:"BoycottItem",props:{id:Number,title:{type:String,required:!0},resume:{type:String,required:!0},description:String,image:Array,siteweb:String,year:String,tags:Array,comments:Number,likes:Number,date_start:Date,date_end:Date,likes:Array,userId:String}},v={class:"gallery-item h-100"},S=["src"],x={key:1,src:f,class:"img-fluid",alt:""},I={class:"gallery-links d-flex align-items-center justify-content-center"},N=s("i",{class:"bi bi-arrows-angle-expand"},null,-1),T={class:"row"},L={class:"col"},j={class:"fst-italic"},V={class:"col-auto"},q=s("i",{class:"bi bi-chat-square-fill"},null,-1),A=s("i",{class:"bi bi-hand-thumbs-up-fill"},null,-1);function D(e,r,i,g,m,u){const c=d("router-link"),t=d("RouterLink");return o(),a("div",null,[s("div",v,[i.image.length>0?(o(),a("img",{key:0,src:"https://images.kalanso.top/"+i.image[0],class:"img-fluid",alt:""},null,8,S)):(o(),a("img",x)),s("div",I,[_(c,{to:{name:"boycott",params:{id:i.id}},title:"Voir",class:"glightbox preview-link"},{default:y(()=>[N]),_:1},8,["to"])])]),s("div",T,[s("div",L,[s("h3",null,[_(t,{to:{name:"boycott",params:{id:i.id}}},{default:y(()=>[l(n(i.title),1)]),_:1},8,["to"])]),s("div",j,n(i.resume),1)]),s("div",V,[l(n(i.comments)+" ",1),q,l(" "+n(i.likes.length)+" ",1),A])])])}const P=h(w,[["render",D]]),$={name:"TheBoycotts",components:{BoycottItem:P},data(){return{boycotts:[],toast:B()}},props:{createdBy:String,userId:String,type:String,typeSort:String},async created(){this.typeSort=="popularity"?await this.getBoycottsByPopularity():await this.getBoycotts()},methods:{async getBoycotts(){try{let e,r="";this.type&&(r=this.type+"/"),this.createdBy=="all"?e=await fetch("https://boycott-service.onrender.com/api/boycott"):this.createdBy=="user"&&(e=await fetch("https://boycott-service.onrender.com/api/boycott/user/"+r+this.userId)),this.boycotts=await e.json(),this.$emit("getBoycotts",this.boycotts.length)}catch(e){this.toast.error(e)}},async getBoycottsByPopularity(){try{let e;e=await fetch("https://boycott-service.onrender.com/api/boycott/sort/popularity"),this.boycotts=await e.json()}catch(e){this.toast.error(e)}}}},C={id:"gallery",class:"gallery"},F={class:"container-fluid"},R={class:"row gy-4 justify-content-center"};function E(e,r,i,g,m,u){const c=d("BoycottItem");return o(),a("section",C,[s("div",F,[s("div",R,[(o(!0),a(b,null,k(m.boycotts,(t,p)=>(o(),a("div",{class:"col-xl-3 col-lg-4 col-md-6",key:p},[_(c,{id:t._id,title:t.title,resume:t.resume,description:t.description,image:t.image,siteweb:t.siteweb,year:t.year,tags:t.tags,date_start:t.date_start,date_end:t.date_end,comments:t.comments.length,likes:t.likes,userId:i.userId,onToggleLike:u.getBoycotts},null,8,["id","title","resume","description","image","siteweb","year","tags","date_start","date_end","comments","likes","userId","onToggleLike"])]))),128))])])])}const G=h($,[["render",E]]);export{G as B};
