import{_ as g,u as y,o as a,c as n,a as s,k as f,e as l,l as c,F as d,h as p,p as w,t as m}from"./index.1f24928c.js";const _={name:"SignupView",data(){return{login:"",email:"",password:"",country:"",state:"",city:"",countries:[],states:[],cities:[],toast:y()}},watch:{country(i){this.countries.includes(i)&&this.getStates()},state(i){this.states.includes(i)&&this.getCities()}},async created(){await this.getCountries()},methods:{async signup(i){try{const t=await fetch("https://boycott-service.onrender.com/api/signup",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({login:this.login,email:this.email,password:this.password,state:this.state,country:this.country,city:this.city})});let r=await t.json();t.status==201?(this.toast.success(r.message),this.$router.push("/")):this.toast.error(r.message)}catch(t){this.toast.error(t)}},async getCountries(){try{let t=await(await fetch("https://countriesnow.space/api/v0.1/countries/positions")).json();Object.values(t.data).forEach(r=>{this.countries.push(r.name)})}catch{this.toast.warning("Pas de suggestions")}},async getStates(){try{this.states=[];let t=await(await fetch("https://countriesnow.space/api/v0.1/countries/states/q?country="+this.country)).json();Object.values(t.data.states).forEach(r=>{this.states.push(r.name)})}catch{this.toast.warning("Pas de suggestions")}},async getCities(){try{this.cities=[];let t=await(await fetch(`https://countriesnow.space/api/v0.1/countries/state/cities/q?country=${this.country}&state=${this.state}`)).json();this.cities=t.data}catch{this.toast.warning("Pas de suggestions")}}}},v={id:"main","data-aos":"fade","data-aos-delay":"500"},V=s("div",{class:"page-header d-flex align-items-center"},[s("div",{class:"container position-relative text-center"},[s("h2",null,"S'inscrire")])],-1),S={id:"contact",class:"contact"},C={class:"container"},b={class:"row justify-content-center mt-4"},j={class:"col-lg-6"},q={class:"form-group mt-3"},k={class:"form-group mt-3"},x={class:"form-group mt-3 mb-4"},U={class:"form-group mt-3"},O={id:"datalistCountries"},P={class:"form-group mt-3"},z={id:"datalistStates"},B={class:"form-group mt-3"},E={id:"datalistCities"},M=s("div",{class:"text-center mt-3"},[s("button",{type:"submit"},"S'inscrire")],-1);function N(i,t,r,T,o,h){return a(),n("main",v,[V,s("section",S,[s("div",C,[s("div",b,[s("div",j,[i.message?w("",!0):(a(),n("form",{key:0,onSubmit:t[6]||(t[6]=f((...e)=>h.signup&&h.signup(...e),["prevent"])),method:"post",role:"form",class:"form"},[s("div",q,[l(s("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>o.login=e),id:"login",placeholder:"Votre login"},null,512),[[c,o.login]])]),s("div",k,[l(s("input",{type:"email",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=e=>o.email=e),id:"email",placeholder:"Votre email"},null,512),[[c,o.email]])]),s("div",x,[l(s("input",{type:"password",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=e=>o.password=e),id:"password",placeholder:"Mot de passe"},null,512),[[c,o.password]])]),s("div",U,[l(s("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.country=e),class:"form-control",list:"datalistCountries",placeholder:"Votre pays, commencez \xE0 taper..."},null,512),[[c,o.country]]),s("datalist",O,[(a(!0),n(d,null,p(o.countries,(e,u)=>(a(),n("option",{key:u},m(e),1))),128))])]),s("div",P,[l(s("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.state=e),class:"form-control",list:"datalistStates",placeholder:"Votre r\xE9gion, commencez \xE0 taper..."},null,512),[[c,o.state]]),s("datalist",z,[(a(!0),n(d,null,p(o.states,(e,u)=>(a(),n("option",{key:u},m(e),1))),128))])]),s("div",B,[l(s("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.city=e),class:"form-control",list:"datalistCities",placeholder:"Votre ville, commencez \xE0 taper..."},null,512),[[c,o.city]]),s("datalist",E,[(a(!0),n(d,null,p(o.cities,(e,u)=>(a(),n("option",{key:u},m(e),1))),128))])]),M],32))])])])])])}const F=g(_,[["render",N]]);export{F as default};
