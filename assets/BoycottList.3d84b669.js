import{h as d}from"./moment.9709ab41.js";import{_ as w,u as b,r as m,o as n,c as l,a as t,e as k,v as y,F as B,g as D,b as h,w as u,d as c,t as i,j as S,aQ as x,aO as E,h as Y}from"./index.4f75a0b3.js";import{_ as C}from"./boycott.abc0ad59.js";const L={name:"BoycottList",data(){return{boycotts:[],sort:"",toast:b()}},async created(){await this.getBoycotts()},watch:{sort(s){s?this.getBoycotts(!0):this.getBoycotts()}},methods:{async getBoycotts(s){this.boycotts=[];let a;try{s?a=await fetch("https://boycott-service.onrender.com/api/boycott/sort/"+this.sort):a=await fetch("https://boycott-service.onrender.com/api/boycott"),this.boycotts=await a.json(),this.boycotts.forEach(o=>{o.dateStart=d(new Date(o.dateStart)).isValid()?d(new Date(o.dateStart)).format("MM-DD-YYYY"):"Non d\xE9fini",o.dateEnd=d(new Date(o.dateEnd)).isValid()?d(new Date(o.dateEnd)).format("MM-DD-YYYY"):"Non d\xE9fini"})}catch(o){this.toast.error(o)}},async deleteBoycott(s){try{await fetch("https://boycott-service.onrender.com/api/boycott?id="+s,{method:"DELETE",headers:{"Content-type":"application/json",Authorization:"Bearer "+localStorage.accessToken,"x-access-token":localStorage.accessToken}}),this.getBoycotts()}catch(a){this.toast.error(a)}}}},r=s=>(x("data-v-359f689c"),s=s(),E(),s),M={class:"content-wrapper"},V={class:"row"},I={class:"col-12 grid-margin"},N={class:"card"},T={class:"card-body"},j={class:"card-title row"},q=r(()=>t("div",{class:"col"},[t("h4",null,"Boycotts")],-1)),A={class:"col-auto form-inline"},F={class:"form-group row"},R=r(()=>t("label",{class:"col-sm-3 col-form-label text-nowrap"},"Trier par: ",-1)),z={class:"col-sm-9"},O=Y('<option selected data-v-359f689c>---</option><option value="dateStart" data-v-359f689c>date du d\xE9but</option><option value="dateEnd" data-v-359f689c>date de la fin</option><option value="likes_count" data-v-359f689c>nombre de membres</option><option value="warns_count" data-v-359f689c>nombre d&#39;avertissements</option><option value="comments_count" data-v-359f689c>nombre de commentaires</option>',6),P=[O],Q={class:"table-responsive"},U={class:"table text-center"},$=r(()=>t("thead",null,[t("tr",null,[t("th"),t("th",null," Produit "),t("th",null," Cr\xE9ateur "),t("th",null," Date du d\xE9but "),t("th",null," Date de la fin "),t("th",null,[t("i",{class:"bi bi-chat-quote-fill"}),c(" Commentaires")]),t("th",null,[t("i",{class:"bi bi-people-fill"}),c(" Membres")]),t("th",null,[t("i",{class:"bi bi-exclamation-diamond-fill"}),c(" Avertissements")]),t("th"),t("th")])],-1)),G=["src"],H={key:1,src:C,class:"img-fluid",alt:""},J=r(()=>t("i",{class:"bi bi-pencil"},null,-1)),K=["onClick"],W=r(()=>t("i",{class:"bi bi-trash"},null,-1)),X=[W];function Z(s,a,o,tt,_,f){const p=m("router-link"),v=m("RouterLink");return n(),l("div",M,[t("div",V,[t("div",I,[t("div",N,[t("div",T,[t("div",j,[q,t("div",A,[t("div",F,[R,t("div",z,[k(t("select",{class:"form-control","onUpdate:modelValue":a[0]||(a[0]=e=>_.sort=e)},P,512),[[y,_.sort]])])])])]),t("div",Q,[t("table",U,[$,t("tbody",null,[(n(!0),l(B,null,D(_.boycotts,(e,g)=>(n(),l("tr",{key:g},[t("td",null,[e.image&&e.image.length>0?(n(),l("img",{key:0,src:"https://images.kalanso.top/"+e.image[0],alt:""},null,8,G)):(n(),l("img",H))]),t("td",null,[h(p,{target:"_blank",to:{name:"boycott",params:{id:e._id}}},{default:u(()=>[c(i(e.title),1)]),_:2},1032,["to"])]),t("td",null,[h(p,{target:"_blank",to:"/profile/"+e.userId._id},{default:u(()=>[c(i(e.userId.login),1)]),_:2},1032,["to"])]),t("td",null,i(e.dateStart),1),t("td",null,i(e.dateEnd),1),t("td",null,i(e.comments.length),1),t("td",null,i(e.likes.length),1),t("td",null,i(e.warns.length),1),t("td",null,[h(v,{to:{name:"editBoycott",params:{id:e._id}}},{default:u(()=>[J]),_:2},1032,["to"])]),t("td",null,[t("a",{href:"#",onClick:S(et=>f.deleteBoycott(e._id),["prevent"])},X,8,K)])]))),128))])])])])])])])])}const it=w(L,[["render",Z],["__scopeId","data-v-359f689c"]]);export{it as default};
