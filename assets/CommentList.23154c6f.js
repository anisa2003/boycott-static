import{h as k}from"./moment.9709ab41.js";import{_ as v,u as b,r as h,o as i,c as n,a as t,F as C,g as w,b as m,w as u,d as p,t as r,j as x,aQ as I,aO as L}from"./index.03186340.js";import{_ as D}from"./boycott.abc0ad59.js";const E={name:"CommentList",data(){return{comments:[],toast:b()}},async created(){await this.getComments()},methods:{async getComments(){this.comments=[];try{(await(await fetch("https://boycott-service.onrender.com/api/boycott")).json()).forEach(o=>{o.comments.forEach(a=>{let l=k(new Date(a.createdAt)).format("MM-DD-YYYY"),d={_id:o._id,title:o.title,image:o.image,date:l,user_id:a.userId._id,login:a.userId.login,comment_id:a._id,text:a.text};this.comments.push(d)})})}catch(s){this.toast.error(s)}},async deleteComment(s,c){try{await fetch("https://boycott-service.onrender.com/api/comment?boycottId="+s+"&commentId="+c,{method:"DELETE",headers:{"Content-type":"application/json",Authorization:"Bearer "+localStorage.accessToken,"x-access-token":localStorage.accessToken}}),this.getComments()}catch(o){this.toast.error(o)}}}},_=s=>(I("data-v-3498056f"),s=s(),L(),s),S={class:"content-wrapper"},T={class:"row"},B={class:"col-12 grid-margin"},Y={class:"card"},j={class:"card-body"},M=_(()=>t("div",{class:"card-title row"},[t("h4",null,"Commentaires")],-1)),N={class:"table-responsive"},V={class:"table text-center"},$=_(()=>t("thead",null,[t("tr",null,[t("th"),t("th",null," Produit "),t("th",null," Utilisateur "),t("th",null," Commentaire "),t("th",null," Date "),t("th")])],-1)),q=["src"],A={key:1,src:D,class:"img-fluid",alt:""},F={class:"text-left"},R={class:"date-comment"},z=["onClick"],O=_(()=>t("i",{class:"bi bi-trash"},null,-1)),P=[O];function Q(s,c,o,a,l,d){const g=h("router-link"),f=h("RouterLink");return i(),n("div",S,[t("div",T,[t("div",B,[t("div",Y,[t("div",j,[M,t("div",N,[t("table",V,[$,t("tbody",null,[(i(!0),n(C,null,w(l.comments,(e,y)=>(i(),n("tr",{key:y},[t("td",null,[e.image&&e.image.length>0?(i(),n("img",{key:0,src:"https://images.kalanso.top/"+e.image[0],alt:""},null,8,q)):(i(),n("img",A))]),t("td",null,[m(g,{target:"_blank",to:{name:"boycott",params:{id:e._id}}},{default:u(()=>[p(r(e.title),1)]),_:2},1032,["to"])]),t("td",null,[m(f,{target:"_blank",to:"/profile/"+e.user_id},{default:u(()=>[p(r(e.login),1)]),_:2},1032,["to"])]),t("td",F,r(e.text),1),t("td",R,r(e.date),1),t("td",null,[t("a",{href:"#",onClick:x(U=>d.deleteComment(e._id,e.comment_id),["prevent"])},P,8,z)])]))),128))])])])])])])])])}const K=v(E,[["render",Q],["__scopeId","data-v-3498056f"]]);export{K as default};
