import{h as k}from"./moment.9709ab41.js";import{_ as b,u as v,r as h,o as i,c as n,a as t,F as C,g as w,b as m,w as u,d as p,t as r,j as x,aQ as I,aO as L}from"./index.e297515f.js";import{_ as D}from"./boycott.abc0ad59.js";const E={name:"CommentList",data(){return{comments:[],toast:v()}},async created(){await this.getComments()},methods:{async getComments(){this.comments=[];try{(await(await fetch("https://boycott-service.onrender.com/api/boycott")).json()).forEach(o=>{o.comments.forEach(a=>{let c=k(new Date(a.createdAt)).format("MM-DD-YYYY"),l={_id:o._id,title:o.title,image:o.image,date:c,user_id:a.userId._id,login:a.userId.login,comment_id:a._id,text:a.text};this.comments.push(l)})})}catch(s){this.toast.error(s)}},async deleteComment(s,d){try{await fetch("https://boycott-service.onrender.com/api/comment?boycottId="+s+"&commentId="+d,{method:"DELETE",headers:{"Content-type":"application/json",Authorization:"Bearer "+localStorage.accessToken,"x-access-token":localStorage.accessToken}}),this.getComments()}catch(o){this.toast.error(o)}}}},_=s=>(I("data-v-85fc0d77"),s=s(),L(),s),S={id:"main","data-aos":"fade","data-aos-delay":"500"},T={class:"content-wrapper"},B={class:"row"},Y={class:"col-12 grid-margin"},j={class:"card bg-transparent"},M={class:"card-body"},N=_(()=>t("div",{class:"card-title row"},[t("h4",null,"Commentaires")],-1)),V={class:"table-responsive"},$={class:"table text-center table-dark table-striped rounded-corners"},q=_(()=>t("thead",null,[t("tr",null,[t("th"),t("th",null," Produit "),t("th",null," Utilisateur "),t("th",null," Commentaire "),t("th",null," Date "),t("th")])],-1)),A=["src"],F={key:1,src:D,class:"img-fluid small-round-img",alt:""},R={class:"text-left"},z={class:"date-comment"},O=["onClick"],P=_(()=>t("i",{class:"bi bi-trash"},null,-1)),Q=[P];function U(s,d,o,a,c,l){const g=h("router-link"),f=h("RouterLink");return i(),n("main",S,[t("div",T,[t("div",B,[t("div",Y,[t("div",j,[t("div",M,[N,t("div",V,[t("table",$,[q,t("tbody",null,[(i(!0),n(C,null,w(c.comments,(e,y)=>(i(),n("tr",{key:y},[t("td",null,[e.image&&e.image.length>0?(i(),n("img",{key:0,src:"https://images.kalanso.top/"+e.image[0],class:"small-round-img",alt:""},null,8,A)):(i(),n("img",F))]),t("td",null,[m(g,{target:"_blank",to:{name:"boycott",params:{id:e._id}}},{default:u(()=>[p(r(e.title),1)]),_:2},1032,["to"])]),t("td",null,[m(f,{target:"_blank",to:"/profile/"+e.user_id},{default:u(()=>[p(r(e.login),1)]),_:2},1032,["to"])]),t("td",R,r(e.text),1),t("td",z,r(e.date),1),t("td",null,[t("a",{href:"#",onClick:x(G=>l.deleteComment(e._id,e.comment_id),["prevent"])},Q,8,O)])]))),128))])])])])])])])])])}const W=b(E,[["render",U],["__scopeId","data-v-85fc0d77"]]);export{W as default};
